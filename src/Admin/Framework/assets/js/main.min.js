((R,P,g,v)=>{R(g).ready(function(){R(".themeatelier-core-admin").removeClass("chat-help-preloader")});var W={funcs:{}};W.vars={onloaded:!1,$body:R("body"),$window:R(P),$document:R(g),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:R("body").hasClass("rtl")},W.helper={uid:function(t){return(t||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(t){return(t+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(t,a){var e=new RegExp(W.helper.preg_quote(a+"[\\d+]"),"g");t.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),t.each(function(t){R(this).find(":input").each(function(){this.name=this.name.replace(e,a+"["+t+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(n,i,s){var c;return function(){var t=this,a=arguments,e=s&&!c;clearTimeout(c),c=setTimeout(function(){c=null,s||n.apply(t,a)},i),e&&n.apply(t,a)}}},R.fn.THEMEATELIER_CORE_clone=function(){for(var t=R.fn.clone.apply(this,arguments),a=this.find("select").add(this.filter("select")),e=t.find("select").add(t.filter("select")),n=0;n<a.length;++n)for(var i=0;i<a[n].options.length;++i)!0===a[n].options[i].selected&&(e[n].options[i].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),t},R.fn.THEMEATELIER_CORE_expand_all=function(){return this.each(function(){R(this).on("click",function(t){t.preventDefault(),R(".themeatelier-core-wrapper").toggleClass("themeatelier-core-show-all"),R(".themeatelier-core-section").THEMEATELIER_CORE_reload_script(),R(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},R.fn.THEMEATELIER_CORE_nav_options=function(){return this.each(function(){var e,t=R(this),a=R(P),n=R("#wpwrap"),i=t.find("a");a.on("hashchange themeatelier-core.hashchange",function(){var t=P.location.hash.replace("#tab=",""),t=t||i.first().attr("href").replace("#tab=",""),a=R('[data-tab-id="'+t+'"]');a.length&&(a.closest(".themeatelier-core-tab-item").addClass("themeatelier-core-tab-expanded").siblings().removeClass("themeatelier-core-tab-expanded"),a.next().is("ul")&&(t=(a=a.next().find("li").first().find("a")).data("tab-id")),i.removeClass("themeatelier-core-active"),a.addClass("themeatelier-core-active"),e&&e.addClass("hidden"),(a=R('[data-section-id="'+t+'"]')).removeClass("hidden"),a.THEMEATELIER_CORE_reload_script(),R(".themeatelier-core-section-id").val(a.index()+1),e=a,n.hasClass("wp-responsive-open"))&&(R("html, body").animate({scrollTop:a.offset().top-50},200),n.removeClass("wp-responsive-open"))}).trigger("themeatelier-core.hashchange")})},R.fn.THEMEATELIER_CORE_nav_metabox=function(){return this.each(function(){var e,t=R(this),n=t.find("a"),i=t.parent().find(".themeatelier-core-section");n.each(function(a){R(this).on("click",function(t){t.preventDefault();t=R(this),n.removeClass("themeatelier-core-active"),t.addClass("themeatelier-core-active"),e!==v&&e.addClass("hidden"),t=i.eq(a);t.removeClass("hidden"),t.THEMEATELIER_CORE_reload_script(),e=t})}),n.first().trigger("click")})},R.fn.THEMEATELIER_CORE_page_templates=function(){this.length&&R(g).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var t=R(this).val()||"default";R(".themeatelier-core-page-templates").removeClass("themeatelier-core-metabox-show").addClass("themeatelier-core-metabox-hide"),R(".themeatelier-core-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("themeatelier-core-metabox-hide").addClass("themeatelier-core-metabox-show")})},R.fn.THEMEATELIER_CORE_post_formats=function(){this.length&&R(g).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t="0"===(t=R(this).val()||"default")?"default":t;R(".themeatelier-core-post-formats").removeClass("themeatelier-core-metabox-show").addClass("themeatelier-core-metabox-hide"),R(".themeatelier-core-post-format-"+t).removeClass("themeatelier-core-metabox-hide").addClass("themeatelier-core-metabox-show")})},R.fn.THEMEATELIER_CORE_search=function(){return this.each(function(){R(this).find("input").on("change keyup",function(){var a=R(this).val(),t=R(".themeatelier-core-wrapper"),e=t.find(".themeatelier-core-section").find("> .themeatelier-core-field:not(.themeatelier-core-depend-on)"),n=e.find("> .themeatelier-core-title, .themeatelier-core-search-tags");3<a.length?(e.addClass("themeatelier-core-metabox-hide"),t.addClass("themeatelier-core-search-all"),n.each(function(){var t=R(this);t.text().match(new RegExp(".*?"+a+".*?","i"))&&((t=t.closest(".themeatelier-core-field")).removeClass("themeatelier-core-metabox-hide"),t.parent().THEMEATELIER_CORE_reload_script())})):(e.removeClass("themeatelier-core-metabox-hide"),t.removeClass("themeatelier-core-search-all"))})})},R.fn.THEMEATELIER_CORE_sticky=function(){return this.each(function(){function t(){r=n.scrollTop(),o()}var e=R(this),n=R(P),i=e.find(".themeatelier-core-header-inner"),s=parseInt(i.css("padding-left"))+parseInt(i.css("padding-right")),c=32,r=0,a=!1,h=function(){var t=e.offset().top,t=Math.max(c,t-r),a=n.innerWidth();t<=c&&782<a?(i.css({width:e.outerWidth()-s}),e.css({height:e.outerHeight()}).addClass("themeatelier-core-sticky")):(i.removeAttr("style"),e.removeAttr("style").removeClass("themeatelier-core-sticky"))},o=function(){a||requestAnimationFrame(function(){h(),a=!1}),a=!0};n.on("scroll resize",t),t()})},R.fn.THEMEATELIER_CORE_dependency=function(){return this.each(function(){var a,e,h,o,t=R(this),n=t.children("[data-controller]");n.length&&(a=R.THEMEATELIER_CORE_deps.createRuleset(),e=R.THEMEATELIER_CORE_deps.createRuleset(),h=[],o=[],n.each(function(){var n=R(this),t=n.data("controller").split("|"),i=n.data("condition").split("|"),s=n.data("value").toString().split("|"),c=!!n.data("depend-global"),r=c?e:a;R.each(t,function(t,a){var e=s[t]||"",t=i[t]||i[0];(r=r.createRule('[data-depend-id="'+a+'"]',t,e)).include(n),(c?o:h).push(a)})}),h.length&&R.THEMEATELIER_CORE_deps.enable(t,a,h),o.length)&&R.THEMEATELIER_CORE_deps.enable(W.vars.$body,e,o)})},R.fn.THEMEATELIER_CORE_field_accordion=function(){return this.each(function(){R(this).find(".themeatelier-core-accordion-title").on("click",function(){var t=R(this),a=t.find(".themeatelier-core-accordion-icon"),t=t.next();a.hasClass("fa-angle-right")?a.removeClass("fa-angle-right").addClass("fa-angle-down"):a.removeClass("fa-angle-down").addClass("fa-angle-right"),t.data("opened")||(t.THEMEATELIER_CORE_reload_script(),t.data("opened",!0)),t.toggleClass("themeatelier-core-accordion-open")})})},R.fn.THEMEATELIER_CORE_field_backup=function(){return this.each(function(){var a,e,n,i;P.wp.customize!==v&&(e=R(a=this),R("body"),n=e.find(".themeatelier-core-import"),i=e.find(".themeatelier-core-reset"),a.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(t){t._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("THEMEATELIER_CORE_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},i.on("click",function(t){t.preventDefault(),W.vars.is_confirm&&(a.notificationOverlay(),P.wp.ajax.post("themeatelier-core-reset",{unique:i.data("unique"),nonce:i.data("nonce")}).done(function(t){P.location.reload(!0)}).fail(function(t){alert(t.error),wp.customize.notifications.remove("THEMEATELIER_CORE_field_backup_notification")}))}),n.on("click",function(t){t.preventDefault(),W.vars.is_confirm&&(a.notificationOverlay(),P.wp.ajax.post("themeatelier-core-import",{unique:n.data("unique"),nonce:n.data("nonce"),data:e.find(".themeatelier-core-import-data").val()}).done(function(t){P.location.reload(!0)}).fail(function(t){alert(t.error),wp.customize.notifications.remove("THEMEATELIER_CORE_field_backup_notification")}))}))})},R.fn.THEMEATELIER_CORE_field_background=function(){return this.each(function(){R(this).find(".themeatelier-core--background-image").THEMEATELIER_CORE_reload_script()})},R.fn.THEMEATELIER_CORE_field_code_editor=function(){return this.each(function(){var a,n,t,i,s;"function"==typeof CodeMirror&&(a=R(this),n=a.find("textarea"),t=a.find(".CodeMirror"),i=n.data("editor"),t.length&&t.remove(),s=setInterval(function(){var e,t;a.is(":visible")&&(e=CodeMirror.fromTextArea(n[0],i),"default"!==i.theme&&-1===W.vars.code_themes.indexOf(i.theme)&&(t=R("<link>"),R("#themeatelier-core-codemirror-css").after(t),t.attr({rel:"stylesheet",id:"themeatelier-core-codemirror-"+i.theme+"-css",href:i.cdnURL+"/theme/"+i.theme+".min.css",type:"text/css",media:"all"}),W.vars.code_themes.push(i.theme)),CodeMirror.modeURL=i.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(e,i.mode),e.on("change",function(t,a){n.val(e.getValue()).trigger("change")}),clearInterval(s))}))})},R.fn.THEMEATELIER_CORE_field_date=function(){return this.each(function(){var t=R(this),e=t.find("input"),n=t.find(".themeatelier-core-date-settings").data("settings"),n=R.extend({},n,{showAnim:"",beforeShow:function(t,a){R(a.dpDiv).addClass("themeatelier-core-datepicker-wrapper")},onClose:function(t,a){R(a.dpDiv).removeClass("themeatelier-core-datepicker-wrapper")}});2===e.length&&(n=R.extend({},n,{onSelect:function(t){R(this),e.first();var a=e.first().attr("id")===R(this).attr("id")?"minDate":"maxDate",t=R.datepicker.parseDate(n.dateFormat,t);e.not(this).datepicker("option",a,t)}})),e.each(function(){var t=R(this);t.hasClass("hasDatepicker")&&t.removeAttr("id").removeClass("hasDatepicker"),t.datepicker(n)})})},R.fn.THEMEATELIER_CORE_field_datetime=function(){return this.each(function(){var t=R(this),n=t.find("input"),a=t.find(".themeatelier-core-datetime-settings").data("settings"),a=R.extend({},a,{onReady:function(t,a,e){R(e.calendarContainer).addClass("themeatelier-core-flatpickr")}});2===n.length&&(a=R.extend({},a,{onChange:function(t,a,e){"from"===R(e.element).data("type")?n.last().get(0)._flatpickr.set("minDate",t[0]):n.first().get(0)._flatpickr.set("maxDate",t[0])}})),n.each(function(){R(this).flatpickr(a)})})},R.fn.THEMEATELIER_CORE_field_fieldset=function(){return this.each(function(){R(this).find(".themeatelier-core-fieldset-content").THEMEATELIER_CORE_reload_script()})},R.fn.THEMEATELIER_CORE_field_gallery=function(){return this.each(function(){var i,t=R(this),s=t.find(".themeatelier-core-edit-gallery"),c=t.find(".themeatelier-core-clear-gallery"),r=t.find("ul"),h=t.find("input");t.find("img");t.on("click",".themeatelier-core-button, .themeatelier-core-edit-gallery",function(t){var a=R(this),e=h.val(),a=a.hasClass("themeatelier-core-edit-gallery")?"edit":"add",n="add"!=a||e.length?"gallery-edit":"gallery";t.preventDefault(),void 0!==P.wp&&P.wp.media&&P.wp.media.gallery&&("gallery"==n?(i=P.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(i=P.wp.media.gallery.edit('[gallery ids="'+e+'"]'),"add"==a&&i.setState("gallery-library")),i.on("update",function(t){r.empty();t=t.models.map(function(t){var t=t.toJSON(),a=(t.sizes&&t.sizes.thumbnail&&t.sizes.thumbnail.url?t.sizes.thumbnail:t).url;return r.append('<li><img src="'+a+'"></li>'),t.id});h.val(t.join(",")).trigger("change"),c.removeClass("hidden"),s.removeClass("hidden")}))}),c.on("click",function(t){t.preventDefault(),r.empty(),h.val("").trigger("change"),c.addClass("hidden"),s.addClass("hidden")})})},R.fn.THEMEATELIER_CORE_field_group=function(){return this.each(function(){function t(t){t.preventDefault();var a,e,n,i,t=s.children(".themeatelier-core-cloneable-item").length;r.hide(),d&&d<t+1?c.show():(a=(t=R(this).parent().parent()).children(".themeatelier-core-cloneable-helper").THEMEATELIER_CORE_clone(!0),e=t.children(".themeatelier-core-cloneable-title").THEMEATELIER_CORE_clone(),n=t.children(".themeatelier-core-cloneable-content").THEMEATELIER_CORE_clone(),(i=R('<div class="themeatelier-core-cloneable-item" />')).append(a),i.append(e),i.append(n),s.children().eq(t.index()).after(i),W.helper.name_nested_replace(s.children(".themeatelier-core-cloneable-item"),p),s.accordion("refresh"),s.THEMEATELIER_CORE_customizer_refresh(),s.THEMEATELIER_CORE_customizer_listen({closest:!0}),l&&_(s))}function a(t){t.preventDefault(),t=s.children(".themeatelier-core-cloneable-item").length,c.hide(),r.hide(),f&&t-1<f?r.show():(R(this).closest(".themeatelier-core-cloneable-item").remove(),W.helper.name_nested_replace(s.children(".themeatelier-core-cloneable-item"),p),s.THEMEATELIER_CORE_customizer_refresh(),l&&_(s))}var e=R(this),n=e.children(".themeatelier-core-fieldset"),n=n.length?n:e,s=n.children(".themeatelier-core-cloneable-wrapper"),i=n.children(".themeatelier-core-cloneable-hidden"),c=n.children(".themeatelier-core-cloneable-max"),r=n.children(".themeatelier-core-cloneable-min"),h=s.data("title-by"),o=s.data("title-by-prefix"),p=s.data("field-id"),l=Boolean(Number(s.data("title-number"))),d=parseInt(s.data("max")),f=parseInt(s.data("min")),_=(s.hasClass("ui-accordion")&&s.find(".ui-accordion-header-icon").remove(),function(t){t.find(".themeatelier-core-cloneable-title-number").each(function(t){R(this).html(R(this).closest(".themeatelier-core-cloneable-item").index()+1+".")})});s.accordion({header:"> .themeatelier-core-cloneable-item > .themeatelier-core-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"themeatelier-core-cloneable-header-icon icofont-simple-right",activeHeader:"themeatelier-core-cloneable-header-icon icofont-rounded-down"},activate:function(t,a){var n,i,e=a.newPanel,a=a.newHeader;e.length&&!e.data("opened")?(n=a.find(".themeatelier-core-cloneable-value"),i=[],R.each(h,function(t,a){i.push(e.find('[data-depend-id="'+a+'"]'))}),R.each(i,function(t,a){a.on("change keyup themeatelier-core.keyup",function(){var e=[];R.each(i,function(t,a){a=a.val();a&&e.push(a)}),e.length&&n.text(e.join(o))}).trigger("themeatelier-core.keyup")}),e.THEMEATELIER_CORE_reload_script(),e.data("opened",!0),e.data("retry",!1)):e.data("retry")&&(e.THEMEATELIER_CORE_reload_script_retry(),e.data("retry",!1))}}),s.sortable({axis:"y",handle:".themeatelier-core-cloneable-title,.themeatelier-core-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(t,a){s.accordion({active:!1}),s.sortable("refreshPositions"),a.item.children(".themeatelier-core-cloneable-content").data("retry",!0)},update:function(t,a){W.helper.name_nested_replace(s.children(".themeatelier-core-cloneable-item"),p),s.THEMEATELIER_CORE_customizer_refresh(),l&&_(s)}}),n.children(".themeatelier-core-cloneable-add").on("click",function(t){t.preventDefault();var a=s.children(".themeatelier-core-cloneable-item").length;r.hide(),d&&d<a+1?c.show():((t=i.THEMEATELIER_CORE_clone(!0)).removeClass("themeatelier-core-cloneable-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(p+"[0]",p+"["+a+"]")}),s.append(t),s.accordion("refresh"),s.accordion({active:a}),s.THEMEATELIER_CORE_customizer_refresh(),s.THEMEATELIER_CORE_customizer_listen({closest:!0}),l&&_(s))}),s.children(".themeatelier-core-cloneable-item").children(".themeatelier-core-cloneable-helper").on("click",".themeatelier-core-cloneable-clone",t),n.children(".themeatelier-core-cloneable-hidden").children(".themeatelier-core-cloneable-helper").on("click",".themeatelier-core-cloneable-clone",t);s.children(".themeatelier-core-cloneable-item").children(".themeatelier-core-cloneable-helper").on("click",".themeatelier-core-cloneable-remove",a),n.children(".themeatelier-core-cloneable-hidden").children(".themeatelier-core-cloneable-helper").on("click",".themeatelier-core-cloneable-remove",a)})},R.fn.THEMEATELIER_CORE_field_icon=function(){return this.each(function(){var e=R(this);e.on("click",".themeatelier-core-icon-add",function(t){t.preventDefault();var t=R(this),a=R("#themeatelier-core-modal-icon");a.removeClass("hidden"),W.vars.$icon_target=e,W.vars.icon_modal_loaded||(a.find(".themeatelier-core-modal-loading").show(),P.wp.ajax.post("themeatelier-core-get-icons",{nonce:t.data("nonce")}).done(function(t){a.find(".themeatelier-core-modal-loading").hide(),W.vars.icon_modal_loaded=!0;var e=a.find(".themeatelier-core-modal-load").html(t.content);e.on("click","i",function(t){t.preventDefault();t=R(this).attr("title");W.vars.$icon_target.find(".themeatelier-core-icon-preview i").removeAttr("class").addClass(t),W.vars.$icon_target.find(".themeatelier-core-icon-preview").removeClass("hidden"),W.vars.$icon_target.find(".themeatelier-core-icon-remove").removeClass("hidden"),W.vars.$icon_target.find("input").val(t).trigger("change"),a.addClass("hidden")}),a.on("change keyup",".themeatelier-core-icon-search",function(){var a=R(this).val();e.find("i").each(function(){var t=R(this);t.attr("title").search(new RegExp(a,"i"))<0?t.hide():t.show()})}),a.on("click",".themeatelier-core-modal-close, .themeatelier-core-modal-overlay",function(){a.addClass("hidden")})}).fail(function(t){a.find(".themeatelier-core-modal-loading").hide(),a.find(".themeatelier-core-modal-load").html(t.error),a.on("click",function(){a.addClass("hidden")})}))}),e.on("click",".themeatelier-core-icon-remove",function(t){t.preventDefault(),e.find(".themeatelier-core-icon-preview").addClass("hidden"),e.find("input").val("").trigger("change"),R(this).addClass("hidden")})})},R.fn.THEMEATELIER_CORE_field_map=function(){return this.each(function(){var t,a,e,n,i,s,c,r,h,o,p;"undefined"!=typeof L&&(p=(t=R(this)).find(".themeatelier-core--map-osm"),a=t.find(".themeatelier-core--map-search input"),e=t.find(".themeatelier-core--latitude"),n=t.find(".themeatelier-core--longitude"),i=t.find(".themeatelier-core--zoom"),s=p.data("map"),c=L.map(p.get(0),s),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(c),r=L.marker(s.center,{draggable:!0}).addTo(c),h=function(t){e.val(t.lat),n.val(t.lng),i.val(c.getZoom())},c.on("click",function(t){r.setLatLng(t.latlng),h(t.latlng)}),c.on("zoom",function(){h(r.getLatLng())}),r.on("drag",function(){h(r.getLatLng())}),a.length||(a=R('[data-depend-id="'+t.find(".themeatelier-core--address-field").data("address-field")+'"]')),o={},a.autocomplete({source:function(t,a){var e=t.term;e in o?a(o[e]):R.get("https://nominatim.openstreetmap.org/search",{format:"json",q:e},function(t){t=t.length?t.map(function(t){return{value:t.display_name,label:t.display_name,lat:t.lat,lon:t.lon}},"json"):[{value:"no-data",label:"No Results."}];o[e]=t,a(t)})},select:function(t,a){if("no-data"===a.item.value)return!1;a=L.latLng(a.item.lat,a.item.lon);c.panTo(a),r.setLatLng(a),h(a)},create:function(t,a){R(this).autocomplete("widget").addClass("themeatelier-core-map-ui-autocomplate")}}),e.on("change",p=function(){var t=L.latLng(e.val(),n.val());c.panTo(t),r.setLatLng(t)}),n.on("change",p))})},R.fn.THEMEATELIER_CORE_field_link=function(){return this.each(function(){var n=R(this),t=n.find(".themeatelier-core--link"),i=n.find(".themeatelier-core--add"),s=n.find(".themeatelier-core--edit"),c=n.find(".themeatelier-core--remove"),r=n.find(".themeatelier-core--result"),a=W.helper.uid("themeatelier-core-wplink-textarea-");i.on("click",function(t){t.preventDefault(),P.wpLink.open(a)}),s.on("click",function(t){t.preventDefault(),i.trigger("click"),R("#wp-link-url").val(n.find(".themeatelier-core--url").val()),R("#wp-link-text").val(n.find(".themeatelier-core--text").val()),R("#wp-link-target").prop("checked","_blank"===n.find(".themeatelier-core--target").val())}),c.on("click",function(t){t.preventDefault(),n.find(".themeatelier-core--url").val("").trigger("change"),n.find(".themeatelier-core--text").val(""),n.find(".themeatelier-core--target").val(""),i.removeClass("hidden"),s.addClass("hidden"),c.addClass("hidden"),r.parent().addClass("hidden")}),t.attr("id",a).on("change",function(){var t=P.wpLink.getAttrs(),a=t.href,e=R("#wp-link-text").val(),t=t.target||"";n.find(".themeatelier-core--url").val(a).trigger("change"),n.find(".themeatelier-core--text").val(e),n.find(".themeatelier-core--target").val(t),r.html('{url:"'+a+'", text:"'+e+'", target:"'+t+'"}'),i.addClass("hidden"),s.removeClass("hidden"),c.removeClass("hidden"),r.parent().removeClass("hidden")})})},R.fn.THEMEATELIER_CORE_field_media=function(){return this.each(function(){var e,n=R(this),i=n.find(".themeatelier-core--button"),s=n.find(".themeatelier-core--remove"),c=i.data("library")&&i.data("library").split(",")||"",r=!!n.hasClass("themeatelier-core-assign-field-background")&&n.closest(".themeatelier-core-field-background").find(".themeatelier-core--auto-attributes");i.on("click",function(t){t.preventDefault(),void 0!==P.wp&&P.wp.media&&P.wp.media.gallery&&(e||(e=P.wp.media({library:{type:c}})).on("select",function(){var t=e.state().get("selection").first().attributes,a=i.data("preview-size")||"thumbnail";c.length&&-1===c.indexOf(t.subtype)&&-1===c.indexOf(t.type)||(n.find(".themeatelier-core--id").val(t.id),n.find(".themeatelier-core--width").val(t.width),n.find(".themeatelier-core--height").val(t.height),n.find(".themeatelier-core--alt").val(t.alt),n.find(".themeatelier-core--title").val(t.title),n.find(".themeatelier-core--description").val(t.description),a=void 0!==t.sizes&&void 0!==t.sizes.thumbnail&&"thumbnail"===a?t.sizes.thumbnail.url:void 0!==t.sizes&&void 0!==t.sizes.full?t.sizes.full.url:"image"===t.type?t.url:t.icon,r&&r.removeClass("themeatelier-core--attributes-hidden"),s.removeClass("hidden"),n.find(".themeatelier-core--preview").removeClass("hidden"),n.find(".themeatelier-core--src").attr("src",a),n.find(".themeatelier-core--thumbnail").val(a),n.find(".themeatelier-core--url").val(t.url).trigger("change"))}),e.open())}),s.on("click",function(t){t.preventDefault(),r&&r.addClass("themeatelier-core--attributes-hidden"),s.addClass("hidden"),n.find("input").val(""),n.find(".themeatelier-core--preview").addClass("hidden"),n.find(".themeatelier-core--url").trigger("change")})})},R.fn.THEMEATELIER_CORE_field_repeater=function(){return this.each(function(){function t(t){t.preventDefault();var a,e,n,t=i.children(".themeatelier-core-repeater-item").length;r.hide(),o&&o<t+1?c.show():(a=(t=R(this).parent().parent().parent()).children(".themeatelier-core-repeater-content").THEMEATELIER_CORE_clone(),e=t.children(".themeatelier-core-repeater-helper").THEMEATELIER_CORE_clone(!0),(n=R('<div class="themeatelier-core-repeater-item" />')).append(a),n.append(e),i.children().eq(t.index()).after(n),n.children(".themeatelier-core-repeater-content").THEMEATELIER_CORE_reload_script(),W.helper.name_nested_replace(i.children(".themeatelier-core-repeater-item"),h),i.THEMEATELIER_CORE_customizer_refresh(),i.THEMEATELIER_CORE_customizer_listen({closest:!0}))}function a(t){t.preventDefault(),t=i.children(".themeatelier-core-repeater-item").length,c.hide(),r.hide(),p&&t-1<p?r.show():(R(this).closest(".themeatelier-core-repeater-item").remove(),W.helper.name_nested_replace(i.children(".themeatelier-core-repeater-item"),h),i.THEMEATELIER_CORE_customizer_refresh())}var e=R(this),n=e.children(".themeatelier-core-fieldset"),n=n.length?n:e,i=n.children(".themeatelier-core-repeater-wrapper"),s=n.children(".themeatelier-core-repeater-hidden"),c=n.children(".themeatelier-core-repeater-max"),r=n.children(".themeatelier-core-repeater-min"),h=i.data("field-id"),o=parseInt(i.data("max")),p=parseInt(i.data("min"));i.children(".themeatelier-core-repeater-item").children(".themeatelier-core-repeater-content").THEMEATELIER_CORE_reload_script(),i.sortable({axis:"y",handle:".themeatelier-core-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,a){W.helper.name_nested_replace(i.children(".themeatelier-core-repeater-item"),h),i.THEMEATELIER_CORE_customizer_refresh(),a.item.THEMEATELIER_CORE_reload_script_retry()}}),n.children(".themeatelier-core-repeater-add").on("click",function(t){t.preventDefault();var a=i.children(".themeatelier-core-repeater-item").length;r.hide(),o&&o<a+1?c.show():((t=s.THEMEATELIER_CORE_clone(!0)).removeClass("themeatelier-core-repeater-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(h+"[0]",h+"["+a+"]")}),i.append(t),t.children(".themeatelier-core-repeater-content").THEMEATELIER_CORE_reload_script(),i.THEMEATELIER_CORE_customizer_refresh(),i.THEMEATELIER_CORE_customizer_listen({closest:!0}))}),i.children(".themeatelier-core-repeater-item").children(".themeatelier-core-repeater-helper").on("click",".themeatelier-core-repeater-clone",t),n.children(".themeatelier-core-repeater-hidden").children(".themeatelier-core-repeater-helper").on("click",".themeatelier-core-repeater-clone",t);i.children(".themeatelier-core-repeater-item").children(".themeatelier-core-repeater-helper").on("click",".themeatelier-core-repeater-remove",a),n.children(".themeatelier-core-repeater-hidden").children(".themeatelier-core-repeater-helper").on("click",".themeatelier-core-repeater-remove",a)})},R.fn.THEMEATELIER_CORE_field_slider=function(){return this.each(function(){var t=R(this),e=t.find("input"),a=t.find(".themeatelier-core-slider-ui"),t=e.data(),n=e.val()||0;a.hasClass("ui-slider")&&a.empty(),a.slider({range:"min",value:n,min:t.min||0,max:t.max||100,step:t.step||1,slide:function(t,a){e.val(a.value).trigger("change")}}),e.on("keyup",function(){a.slider("value",e.val())})})},R.fn.THEMEATELIER_CORE_field_sortable=function(){return this.each(function(){var e=R(this).find(".themeatelier-core-sortable");e.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(t,a){e.THEMEATELIER_CORE_customizer_refresh()}}),e.find(".themeatelier-core-sortable-content").THEMEATELIER_CORE_reload_script()})},R.fn.THEMEATELIER_CORE_field_sorter=function(){return this.each(function(){var n=R(this),t=n.find(".themeatelier-core-enabled"),a=n.find(".themeatelier-core-disabled"),a=!!a.length&&a;t.sortable({connectWith:a,placeholder:"ui-sortable-placeholder",update:function(t,a){var e=a.item.find("input");a.item.parent().hasClass("themeatelier-core-enabled")?e.attr("name",e.attr("name").replace("disabled","enabled")):e.attr("name",e.attr("name").replace("enabled","disabled")),n.THEMEATELIER_CORE_customizer_refresh()}}),a&&a.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(t,a){n.THEMEATELIER_CORE_customizer_refresh()}})})},R.fn.THEMEATELIER_CORE_field_spinner=function(){return this.each(function(){var t=R(this),e=t.find("input"),t=t.find(".ui-button"),n=e.data();t.length&&t.remove(),e.spinner({min:n.min||0,max:n.max||100,step:n.step||1,create:function(t,a){n.unit&&e.after('<span class="ui-button themeatelier-core--unit">'+n.unit+"</span>")},spin:function(t,a){e.val(a.value).trigger("change")}})})},R.fn.THEMEATELIER_CORE_field_switcher=function(){return this.each(function(){var e=R(this).find(".themeatelier-core--switcher");e.on("click",function(){var t=0,a=e.find("input");e.hasClass("themeatelier-core--active")?e.removeClass("themeatelier-core--active"):(t=1,e.addClass("themeatelier-core--active")),a.val(t).trigger("change")})})},R.fn.THEMEATELIER_CORE_field_tabbed=function(){return this.each(function(){var t=R(this),a=t.find(".themeatelier-core-tabbed-nav a"),e=t.find(".themeatelier-core-tabbed-content");e.eq(0).THEMEATELIER_CORE_reload_script(),a.on("click",function(t){t.preventDefault();var t=R(this),a=t.index(),a=e.eq(a);t.addClass("themeatelier-core-tabbed-active").siblings().removeClass("themeatelier-core-tabbed-active"),a.THEMEATELIER_CORE_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},R.fn.THEMEATELIER_CORE_field_section_tab=function(){return this.each(function(){var t=R(this),a=t.find(".themeatelier-core-section_tab-nav a"),e=t.find(".themeatelier-core-section_tab-content");e.eq(0).THEMEATELIER_CORE_reload_script(),a.on("click",function(t){t.preventDefault();var t=R(this),a=t.index(),a=e.eq(a);t.addClass("themeatelier-core-section_tab-active").siblings().removeClass("themeatelier-core-section_tab-active"),a.THEMEATELIER_CORE_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},R.fn.THEMEATELIER_CORE_field_typography=function(){return this.each(function(){var C=this,b=R(this),n=[],O=THEMEATELIER_CORE_typography_json.webfonts,a=THEMEATELIER_CORE_typography_json.googlestyles,S=THEMEATELIER_CORE_typography_json.defaultstyles;C.sanitize_subset=function(t){return t=(t=t.replace("-ext"," Extended")).charAt(0).toUpperCase()+t.slice(1)},C.sanitize_style=function(t){return a[t]||t},C.load_google_font=function(t,a,e){t&&"object"==typeof WebFont&&(a=a?a.replace("normal",""):"",e=e?e.replace("normal",""):"",-1===n.indexOf(t=a||e?t+":"+a+e:t)&&WebFont.load({google:{families:[t]}}),n.push(t))},C.append_select_options=function(t,a,i,s,c){t.find("option").not(":first").remove();var r="";R.each(a,function(t,a){var e=a,n=c?i&&-1!==i.indexOf(a)?" selected":"":i&&i===a?" selected":"";"subset"===s?e=C.sanitize_subset(a):"style"===s&&(e=C.sanitize_style(a)),r+='<option value="'+a+'"'+n+">"+e+"</option>"}),t.append(r).trigger("themeatelier-core.change").trigger("chosen:updated")},C.init=function(){var s,c,r,h,o,p,l,d,u,f=[],t=b.find(".themeatelier-core--typography"),_=b.find(".themeatelier-core--type"),A=b.find(".themeatelier-core--block-font-style"),w=t.data("unit"),P=t.data("line-height-unit"),a=t.data("exclude")?t.data("exclude").split(","):[],g=(b.find(".themeatelier-core--chosen").length&&b.find("select").each(function(){var t=R(this),a=t.parent().find(".chosen-container");a.length&&a.remove(),t.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})}),b.find(".themeatelier-core--font-family")),n=g.val(),i=(g.find("option").not(":first-child").remove(),""),v=(R.each(O,function(e,t){a&&-1!==a.indexOf(e)||(i+='<optgroup label="'+t.label+'">',R.each(t.fonts,function(t,a){i+='<option value="'+(a="object"==typeof a?t:a)+'" data-type="'+e+'"'+(a===n?" selected":"")+">"+a+"</option>"}),i+="</optgroup>")}),g.append(i).trigger("chosen:updated"),b.find(".themeatelier-core--block-font-style")),m=(v.length&&(s=b.find(".themeatelier-core--font-style-select"),c=s.val()?s.val().replace(/normal/g,""):"",s.on("change themeatelier-core.change",function(t){var a=s.val(),e=(a=!a&&f&&-1===f.indexOf("normal")?f[0]:a)&&"italic"!==a&&"normal"===a?"normal":"",e=a&&"italic"!==a&&"normal"!==a?a.replace("italic",""):e,a=a&&"italic"===a.substr(-6)?"italic":"";b.find(".themeatelier-core--font-weight").val(e),b.find(".themeatelier-core--font-style").val(a)}),(r=b.find(".themeatelier-core--block-extra-styles")).length)&&(h=b.find(".themeatelier-core--extra-styles"),o=h.val()),b.find(".themeatelier-core--block-subset")),T=(m.length&&(p=b.find(".themeatelier-core--subset"),l=p.val(),d=p.data("multiple")||!1),b.find(".themeatelier-core--block-backup-font-family")),H=(g.on("change themeatelier-core.change",function(t){m.length&&m.addClass("hidden"),r.length&&r.addClass("hidden"),T.length&&T.addClass("hidden");var a,e,n=g.find(":selected"),i=n.val(),n=n.data("type");n&&i?("google"!==n&&"custom"!==n||!T.length||T.removeClass("hidden"),v.length&&(e=S,"google"===n&&O[n].fonts[i][0]?e=O[n].fonts[i][0]:"custom"===n&&O[n].fonts[i]&&(e=O[n].fonts[i]),a=-1!==(f=e).indexOf("normal")?"normal":e[0],a=c&&-1!==e.indexOf(c)?c:a,C.append_select_options(s,e,a,"style"),c=!1,v.removeClass("hidden"),"google"===n)&&r.length&&1<e.length&&(C.append_select_options(h,e,o,"style",!0),o=!1,r.removeClass("hidden")),"google"===n&&m.length&&O[n].fonts[i][1]&&(e=(a=O[n].fonts[i][1]).length<2&&"latin"!==a[0]?a[0]:"",i=l&&-1!==a.indexOf(l)?l:e,i=d&&l?l:i,C.append_select_options(p,a,i,"subset",d),l=!1,m.removeClass("hidden"))):(A.find(":input").val(""),m.length&&(p.find("option").not(":first-child").remove(),p.trigger("chosen:updated")),v.length&&(s.find("option").not(":first-child").remove(),s.trigger("chosen:updated"))),_.val(n)}).trigger("themeatelier-core.change"),b.find(".themeatelier-core--block-preview"));H.length&&(u=b.find(".themeatelier-core--preview"),b.on("change",W.helper.debounce(function(t){H.removeClass("hidden");var a=g.val(),e=b.find(".themeatelier-core--font-weight").val(),n=b.find(".themeatelier-core--font-style").val(),i=b.find(".themeatelier-core--font-size").val(),s=b.find(".themeatelier-core--font-variant").val(),c=b.find(".themeatelier-core--line-height").val(),r=b.find(".themeatelier-core--text-align").val(),h=b.find(".themeatelier-core--text-transform").val(),o=b.find(".themeatelier-core--text-decoration").val(),p=b.find(".themeatelier-core--color").val(),l=b.find(".themeatelier-core--word-spacing").val(),d=b.find(".themeatelier-core--letter-spacing").val(),f=b.find(".themeatelier-core--custom-style").val(),_=("google"===b.find(".themeatelier-core--type").val()&&C.load_google_font(a,e,n),{});a&&(_.fontFamily=a),e&&(_.fontWeight=e),n&&(_.fontStyle=n),s&&(_.fontVariant=s),i&&(_.fontSize=i+w),c&&(_.lineHeight=c+P),d&&(_.letterSpacing=d+w),l&&(_.wordSpacing=l+w),r&&(_.textAlign=r),h&&(_.textTransform=h),o&&(_.textDecoration=o),p&&(_.color=p),u.removeAttr("style"),f&&u.attr("style",f),u.css(_)},100)),H.on("click",function(){u.toggleClass("themeatelier-core--black-background");var t=H.find(".themeatelier-core--toggle");t.hasClass("fa-toggle-off")?t.removeClass("fa-toggle-off").addClass("fa-toggle-on"):t.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),H.hasClass("hidden")||b.trigger("change"))},C.init()})},R.fn.THEMEATELIER_CORE_field_upload=function(){return this.each(function(){var a,t=R(this),e=t.find("input"),n=t.find(".themeatelier-core--button"),i=t.find(".themeatelier-core--remove"),s=t.find(".themeatelier-core--preview"),c=t.find(".themeatelier-core--src"),r=n.data("library")&&n.data("library").split(",")||"";n.on("click",function(t){t.preventDefault(),void 0!==P.wp&&P.wp.media&&P.wp.media.gallery&&(a||(a=P.wp.media({library:{type:r}})).on("select",function(){var t=a.state().get("selection").first().attributes;r.length&&-1===r.indexOf(t.subtype)&&-1===r.indexOf(t.type)||e.val(t.url).trigger("change")}),a.open())}),i.on("click",function(t){t.preventDefault(),e.val("").trigger("change")}),e.on("change",function(t){var a=e.val();a?i.removeClass("hidden"):i.addClass("hidden"),s.length&&(-1!==R.inArray(a.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(s.removeClass("hidden"),c.attr("src",a)):s.addClass("hidden"))})})},R.fn.THEMEATELIER_CORE_field_wp_editor=function(){return this.each(function(){var t,a,e,n,i,s,c,r;void 0!==P.wp.editor&&void 0!==P.tinyMCEPreInit&&void 0!==P.tinyMCEPreInit.mceInit.THEMEATELIER_CORE_wp_editor&&(a=(t=R(this)).find(".themeatelier-core-wp-editor"),e=t.find("textarea"),(t.find(".wp-editor-wrap").length||t.find(".mce-container").length)&&(a.empty(),a.append(e),e.css("display","")),n=W.helper.uid("themeatelier-core-editor-"),e.attr("id",n),i={tinymce:P.tinyMCEPreInit.mceInit.THEMEATELIER_CORE_wp_editor,quicktags:P.tinyMCEPreInit.qtInit.THEMEATELIER_CORE_wp_editor},s=a.data("editor-settings"),(r=wp.oldEditor||wp.editor)&&r.hasOwnProperty("autop")&&(wp.editor.autop=r.autop,wp.editor.removep=r.removep,wp.editor.initialize=r.initialize),i.tinymce=R.extend({},i.tinymce,{selector:"#"+n,setup:function(a){a.on("change keyup",function(){var t=s.wpautop?a.getContent():wp.editor.removep(a.getContent());e.val(t).trigger("change")})}}),!1===s.tinymce&&(i.tinymce=!1,a.addClass("themeatelier-core-no-tinymce")),!1===s.quicktags&&(i.quicktags=!1,a.addClass("themeatelier-core-no-quicktags")),c=setInterval(function(){t.is(":visible")&&(P.wp.editor.initialize(n,i),clearInterval(c))}),s.media_buttons)&&P.THEMEATELIER_CORE_media_buttons&&((r=a.find(".wp-media-buttons")).length?r.find(".themeatelier-core-shortcode-button").data("editor-id",n):((r=R(P.THEMEATELIER_CORE_media_buttons)).find(".themeatelier-core-shortcode-button").data("editor-id",n),a.prepend(r)))})},R.fn.THEMEATELIER_CORE_confirm=function(){return this.each(function(){R(this).on("click",function(t){var a=R(this).data("confirm")||P.THEMEATELIER_CORE_vars.i18n.confirm;if(!confirm(a))return t.preventDefault(),!1;W.vars.is_confirm=!0,W.vars.form_modified=!1})})},R.fn.serializeObject=function(){var n={};return R.each(this.serializeArray(),function(t,a){var e=a.name,a=a.value;n[e]=n[e]===v?a:R.isArray(n[e])?n[e].concat(a):[n[e],a]}),n},R.fn.THEMEATELIER_CORE_save=function(){return this.each(function(){var n,i=R(this),s=R(".themeatelier-core-save"),c=R(".themeatelier-core-options"),r=!1;i.on("click",function(t){var a,e;r||(a=i.data("save"),e=i.val(),s.attr("value",a),i.hasClass("themeatelier-core-save-ajax")?(t.preventDefault(),c.addClass("themeatelier-core-saving"),s.prop("disabled",!0),P.wp.ajax.post("THEMEATELIER_CORE_"+c.data("unique")+"_ajax_save",{data:R("#themeatelier-core-form").serializeJSONTHEMEATELIER_CORE()}).done(function(t){R(".themeatelier-core-error").remove(),Object.keys(t.errors).length&&(i='<i class="themeatelier-core-label-error themeatelier-core-error">!</i>',R.each(t.errors,function(t,a){var t=R('[data-depend-id="'+t+'"]'),e=R('a[href="#tab='+t.closest(".themeatelier-core-section").data("section-id")+'"]'),n=e.closest(".themeatelier-core-tab-item");t.closest(".themeatelier-core-fieldset").append('<p class="themeatelier-core-error themeatelier-core-error-text">'+a+"</p>"),e.find(".themeatelier-core-error").length||e.append(i),n.find(".themeatelier-core-arrow .themeatelier-core-error").length||n.find(".themeatelier-core-arrow").append(i)})),c.removeClass("themeatelier-core-saving"),s.prop("disabled",!1).attr("value",e),r=!1,W.vars.form_modified=!1,W.vars.$form_warning.hide(),clearTimeout(n);var i,a=R(".themeatelier-core-form-success");a.empty().append(t.notice).fadeIn("fast",function(){n=setTimeout(function(){a.fadeOut("fast")},1e3)})}).fail(function(t){alert(t.error)})):W.vars.form_modified=!1),r=!0})})},R.fn.THEMEATELIER_CORE_options=function(){return this.each(function(){var t=R(this),a=t.find(".themeatelier-core-content"),e=t.find(".themeatelier-core-form-success"),n=t.find(".themeatelier-core-form-warning"),i=t.find(".themeatelier-core-header .themeatelier-core-save");(W.vars.$form_warning=n).length&&(P.onbeforeunload=function(){return!!W.vars.form_modified||v},a.on("change keypress",":input",function(){W.vars.form_modified||(e.hide(),n.fadeIn("fast"),W.vars.form_modified=!0)})),e.hasClass("themeatelier-core-form-show")&&setTimeout(function(){e.fadeOut("fast")},1e3),R(g).keydown(function(t){if((t.ctrlKey||t.metaKey)&&83===t.which)return i.trigger("click"),t.preventDefault(),!1})})},R.fn.THEMEATELIER_CORE_taxonomy=function(){return this.each(function(){var t,a,e=R(this),n=e.parents("form");"addtag"===n.attr("id")&&(t=n.find("#submit"),a=e.find(".themeatelier-core-field").THEMEATELIER_CORE_clone(),t.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(e.data("inited",!1),e.empty(),e.html(a),a=a.THEMEATELIER_CORE_clone(),e.THEMEATELIER_CORE_reload_script())}))})},R.fn.THEMEATELIER_CORE_shortcode=function(){var w=this;return w.shortcode_parse=function(t,e){var n="";return R.each(t,function(t,a){n+="["+(e=e||t),R.each(a,function(t,a){"content"===t?n=(n+="]")+a+"[/"+e:n+=w.shortcode_tags(t,a)}),n+="]"}),n},w.shortcode_tags=function(t,a){var e="";return""!==a&&("object"!=typeof a||R.isArray(a)?e+=" "+t+'="'+a.toString()+'"':R.each(a,function(t,a){""!==(a="background-image"===t?a.url||"":a)&&(e+=" "+t+'="'+a.toString()+'"')})),e},w.insertAtChars=function(t,a){t=void 0!==t[0].name?t[0]:t;return t.value.length&&void 0!==t.selectionStart?(t.focus(),t.value.substring(0,t.selectionStart)+a+t.value.substring(t.selectionEnd,t.value.length)):(t.focus(),a)},w.send_to_editor=function(t,a){var e;(e="undefined"!=typeof tinymce?tinymce.get(a):e)&&!e.isHidden()?e.execCommand("mceInsertContent",!1,t):(e=R("#"+a)).val(w.insertAtChars(e,t)).trigger("change")},this.each(function(){var i,s,c,e,r,h,o,n,p,l=R(this),d=l.find(".themeatelier-core-modal-load"),f=(l.find(".themeatelier-core-modal-content"),l.find(".themeatelier-core-modal-insert")),_=l.find(".themeatelier-core-modal-loading"),a=l.find("select"),u=l.data("modal-id"),A=l.data("nonce");R(g).on("click",'.themeatelier-core-shortcode-button[data-modal-id="'+u+'"]',function(t){t.preventDefault(),p=R(this),i=p.data("editor-id")||!1,s=p.data("target-id")||!1,c=p.data("gutenberg-id")||!1,l.removeClass("hidden"),l.hasClass("themeatelier-core-shortcode-single")&&r===v&&a.trigger("change")}),a.on("change",function(){var t=R(this),a=t.find(":selected");e=t.val(),r=a.data("shortcode"),h=a.data("view")||"normal",o=a.data("group")||r,d.empty(),e?(_.show(),P.wp.ajax.post("themeatelier-core-get-shortcode-"+u,{shortcode_key:e,nonce:A}).done(function(t){_.hide();t=R(t.content).appendTo(d);f.parent().removeClass("hidden"),n=t.find(".themeatelier-core--repeat-shortcode").THEMEATELIER_CORE_clone(),t.THEMEATELIER_CORE_reload_script(),t.find(".themeatelier-core-fields").THEMEATELIER_CORE_reload_script()})):f.parent().addClass("hidden")}),f.on("click",function(t){if(t.preventDefault(),!f.prop("disabled")&&!f.attr("disabled")){var e="",a=l.find(".themeatelier-core-field:not(.themeatelier-core-depend-on)").find(":input:not(.ignore)").serializeObjectTHEMEATELIER_CORE();switch(h){case"contents":var n=r?a[r]:a;R.each(n,function(t,a){t=r||t;e+="["+t+"]"+a+"[/"+t+"]"});break;case"group":e+="["+r,R.each(a[r],function(t,a){e+=w.shortcode_tags(t,a)}),e=(e=(e+="]")+w.shortcode_parse(a[o],o))+("[/"+r+"]");break;case"repeater":e+=w.shortcode_parse(a[o],o);break;default:e+=w.shortcode_parse(a)}e=""===e?"["+r+"]":e,c?(t=P.THEMEATELIER_CORE_gutenberg_props.attributes.hasOwnProperty("shortcode")?P.THEMEATELIER_CORE_gutenberg_props.attributes.shortcode:"",P.THEMEATELIER_CORE_gutenberg_props.setAttributes({shortcode:t+e})):i?w.send_to_editor(e,i):(t=s?R(s):p.parent().find("textarea")).val(w.insertAtChars(t,e)).trigger("change"),l.addClass("hidden")}}),l.on("click",".themeatelier-core--repeat-button",function(t){t.preventDefault();var t=l.find(".themeatelier-core--repeatable"),a=n.THEMEATELIER_CORE_clone(),e=a.find(".themeatelier-core-repeat-remove");a.appendTo(t);a.find(".themeatelier-core-fields").THEMEATELIER_CORE_reload_script(),W.helper.name_nested_replace(l.find(".themeatelier-core--repeat-shortcode"),o),e.on("click",function(){a.remove(),W.helper.name_nested_replace(l.find(".themeatelier-core--repeat-shortcode"),o)})}),l.on("click",".themeatelier-core-modal-close, .themeatelier-core-modal-overlay",function(){l.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)for(var a=6-t.length-1;0<=a;a--)t="0"+t;return"#"+t}),W.funcs.parse_color=function(t){var t=t.replace(/\s+/g,""),a=-1!==t.indexOf("rgba")?parseFloat(100*t.replace(/^.*,(.+)\)/,"$1")):100;return{value:t,transparent:a,rgba:a<100}},R.fn.THEMEATELIER_CORE_color=function(){return this.each(function(){var c,r=R(this),e=W.funcs.parse_color(r.val()),t=!P.THEMEATELIER_CORE_vars.color_palette.length||P.THEMEATELIER_CORE_vars.color_palette;r.hasClass("wp-color-picker")&&r.closest(".wp-picker-container").after(r).remove(),r.wpColorPicker({palettes:t,change:function(t,a){a=a.color.toString();c.removeClass("themeatelier-core--transparent-active"),c.find(".themeatelier-core--transparent-offset").css("background-color",a),r.val(a).trigger("change")},create:function(){c=r.closest(".wp-picker-container");var n=r.data("a8cIris"),t=R('<div class="themeatelier-core--transparent-wrap"><div class="themeatelier-core--transparent-slider"></div><div class="themeatelier-core--transparent-offset"></div><div class="themeatelier-core--transparent-text"></div><div class="themeatelier-core--transparent-button">transparent <i class="icofont-toggle-off"></i></div></div>').appendTo(c.find(".wp-picker-holder")),i=t.find(".themeatelier-core--transparent-slider"),s=t.find(".themeatelier-core--transparent-text"),a=t.find(".themeatelier-core--transparent-offset"),t=t.find(".themeatelier-core--transparent-button");"transparent"===r.val()&&c.addClass("themeatelier-core--transparent-active"),t.on("click",function(){"transparent"!==r.val()?(r.val("transparent").trigger("change").removeClass("iris-error"),c.addClass("themeatelier-core--transparent-active")):(r.val(n._color.toString()).trigger("change"),c.removeClass("themeatelier-core--transparent-active"))}),i.slider({value:e.transparent,step:1,min:0,max:100,slide:function(t,a){a=parseFloat(a.value/100);n._color._alpha=a,r.wpColorPicker("color",n._color.toString()),s.text(1===a||0===a?"":a)},create:function(){var t=parseFloat(e.transparent/100);s.text(t<1?t:""),a.css("background-color",e.value),c.on("click",".wp-picker-clear",function(){n._color._alpha=1,s.text(""),i.slider("option","value",100),c.removeClass("themeatelier-core--transparent-active"),r.trigger("change")}),c.on("click",".wp-picker-default",function(){var t=W.funcs.parse_color(r.data("default-color")),a=parseFloat(t.transparent/100),e=a<1?a:"";n._color._alpha=a,s.text(e),i.slider("option","value",t.transparent),"transparent"===t.value&&(r.removeClass("iris-error"),c.addClass("themeatelier-core--transparent-active"))})}})}})})},R.fn.THEMEATELIER_CORE_chosen=function(){return this.each(function(){var e,s,c=R(this),t=c.parent().find(".chosen-container"),a=c.hasClass("themeatelier-core-chosen-sortable")||!1,n=c.hasClass("themeatelier-core-chosen-ajax")||!1,i=c.attr("multiple")||!1,r=R.extend({allow_single_deselect:!0,disable_search_threshold:10,width:i?"100%":"auto",no_results_text:P.THEMEATELIER_CORE_vars.i18n.no_results_text},c.data("chosen-settings"));t.length&&t.remove(),n?(t=R.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:P.THEMEATELIER_CORE_vars.i18n.typing_text,searching_text:P.THEMEATELIER_CORE_vars.i18n.searching_text,no_results_text:P.THEMEATELIER_CORE_vars.i18n.no_results_text},c.data("chosen-settings")),c.THEMEATELIER_COREAjaxChosen(t)):c.chosen(r),i&&(n=(e=c.parent().find(".themeatelier-core-hide-select")).val()||[],c.on("change",function(t,a){a&&a.selected?e.append('<option value="'+a.selected+'" selected="selected">'+a.selected+"</option>"):a&&a.deselected&&e.find('option[value="'+a.deselected+'"]').remove(),P.wp.customize!==v&&0===e.children().length&&e.data("customize-setting-link")&&P.wp.customize.control(e.data("customize-setting-link")).setting.set(""),e.trigger("change")}),c.THEMEATELIER_COREChosenOrder(n,!0)),a&&((s=c.parent().find(".chosen-container").find(".chosen-choices")).bind("mousedown",function(t){R(t.target).is("span")&&t.stopPropagation()}),s.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(t,a){a.placeholder.width(a.item.innerWidth()),a.placeholder.height(a.item.innerHeight())},update:function(t,a){var n="",i=c.data("chosen"),e=c.parent().find(".themeatelier-core-hide-select");s.find(".search-choice-close").each(function(){var e=R(this).data("option-array-index");R.each(i.results_data,function(t,a){a.array_index===e&&(n+='<option value="'+a.value+'" selected>'+a.value+"</option>")})}),e.children().remove(),e.append(n),e.trigger("change")}}))})},R.fn.THEMEATELIER_CORE_checkbox=function(){return this.each(function(){var t=R(this),a=t.find(".themeatelier-core--input"),e=t.find(".themeatelier-core--checkbox");e.on("click",function(){a.val(Number(e.prop("checked"))).trigger("change")})})},R.fn.THEMEATELIER_CORE_checkbox_all=function(){return this.each(function(){var e=R(this);e.on("click",function(){var t=e.closest(".themeatelier-core-field-checkbox").find(":input"),a=!1;t.each(function(){R(this).prop("checked")||(a=!0)}),a?(t.prop("checked","checked"),t.attr("checked","checked")):(t.prop("checked",""),t.removeAttr("checked")),t.first().trigger("change")})})},R.fn.THEMEATELIER_CORE_siblings=function(){return this.each(function(){var a=R(this),t=a.find(".themeatelier-core--sibling"),e=a.data("multiple")||!1;t.on("click",function(){var t=R(this);e?(t.hasClass("themeatelier-core--active")?(t.removeClass("themeatelier-core--active"),t.find("input").prop("checked",!1)):(t.addClass("themeatelier-core--active"),t.find("input").prop("checked",!0))).trigger("change"):(a.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("themeatelier-core--active").siblings().removeClass("themeatelier-core--active"))})})},R.fn.THEMEATELIER_CORE_help=function(){return this.each(function(){var t,a,e=R(this);e.on({mouseenter:function(){t=R('<div class="themeatelier-core-tooltip-pro"></div>').html(e.find(".themeatelier-core-help-text").html()).appendTo("body"),W.vars.is_rtl,a=e.offset().left+30,t.css({top:e.offset().top-(t.outerHeight()/2-10),left:a,textAlign:"left"})},mouseleave:function(){t===v||t.is(":hover")||t.remove()}}),R("body").on("mouseleave",".themeatelier-core-tooltip-pro",function(){t!==v&&t.remove()})})},R.fn.THEMEATELIER_CORE_customizer_refresh=function(){return this.each(function(){var t=R(this),a=t.closest(".themeatelier-core-customize-complex");if(a.length){var e=a.data("unique-id");if(e===v)return;var n=a.find(":input"),a=a.data("option-id"),n=n.serializeObjectTHEMEATELIER_CORE(),n=!R.isEmptyObject(n)&&n[e]&&n[e][a]?n[e][a]:"",e=P.wp.customize.control(e+"["+a+"]");e.setting._value=null,e.setting.set(n)}else t.find(":input").first().trigger("change");R(g).trigger("themeatelier-core-customizer-refresh",t)})},R.fn.THEMEATELIER_CORE_customizer_listen=function(t){var i=R.extend({closest:!1},t);return this.each(function(){var a,t,e,n;P.wp.customize!==v&&(t=(a=i.closest?R(this).closest(".themeatelier-core-customize-complex"):R(this)).find(":input"),e=a.data("unique-id"),n=a.data("option-id"),e!==v)&&t.on("change keyup themeatelier-core.change",function(){var t=a.find(":input").serializeObjectTHEMEATELIER_CORE(),t=!R.isEmptyObject(t)&&t[e]&&t[e][n]?t[e][n]:"";P.wp.customize.control(e+"["+n+"]").setting.set(t)})})},R(g).on("expanded",".control-section",function(){var t,a,e=R(this);e.hasClass("open")&&!e.data("inited")&&(t=e.find(".themeatelier-core-customize-field"),a=e.find(".themeatelier-core-customize-complex"),t.length&&(e.THEMEATELIER_CORE_dependency(),t.THEMEATELIER_CORE_reload_script({dependency:!1}),a.THEMEATELIER_CORE_customizer_listen()),e.data("inited",!0))}),W.vars.$window.on("resize themeatelier-core.resize",W.helper.debounce(function(t){(-1<navigator.userAgent.indexOf("AppleWebKit/")?W.vars.$window.width():P.innerWidth)<=782&&!W.vars.onloaded&&(R(".themeatelier-core-section").THEMEATELIER_CORE_reload_script(),W.vars.onloaded=!0)},200)).trigger("themeatelier-core.resize"),R.fn.THEMEATELIER_CORE_widgets=function(){return this.each(function(){R(g).on("widget-added widget-updated",function(t,a){a=a.find(".themeatelier-core-fields");a.length&&a.THEMEATELIER_CORE_reload_script()}),R(g).on("click",".widget-top",function(t){var a=R(this).parent().find(".themeatelier-core-fields");a.length&&a.THEMEATELIER_CORE_reload_script()}),R(".widgets-sortables, .control-section-sidebar").on("sortstop",function(t,a){a.item.find(".themeatelier-core-fields").THEMEATELIER_CORE_reload_script_retry()})})},R.fn.THEMEATELIER_CORE_nav_menu=function(){return this.each(function(){var t=R(this);t.on("click","a.item-edit",function(){R(this).closest("li.menu-item").find(".themeatelier-core-fields").THEMEATELIER_CORE_reload_script()}),t.on("sortstop",function(t,a){a.item.find(".themeatelier-core-fields").THEMEATELIER_CORE_reload_script_retry()})})},R.fn.THEMEATELIER_CORE_reload_script_retry=function(){return this.each(function(){var t=R(this);t.data("inited")&&t.children(".themeatelier-core-field-wp_editor").THEMEATELIER_CORE_field_wp_editor()})},R.fn.THEMEATELIER_CORE_reload_script=function(t){var a=R.extend({dependency:!0},t);return this.each(function(){var t=R(this);t.data("inited")||(t.children(".themeatelier-core-field-accordion").THEMEATELIER_CORE_field_accordion(),t.children(".themeatelier-core-field-backup").THEMEATELIER_CORE_field_backup(),t.children(".themeatelier-core-field-background").THEMEATELIER_CORE_field_background(),t.children(".themeatelier-core-field-code_editor").THEMEATELIER_CORE_field_code_editor(),t.children(".themeatelier-core-field-date").THEMEATELIER_CORE_field_date(),t.children(".themeatelier-core-field-datetime").THEMEATELIER_CORE_field_datetime(),t.children(".themeatelier-core-field-fieldset").THEMEATELIER_CORE_field_fieldset(),t.children(".themeatelier-core-field-gallery").THEMEATELIER_CORE_field_gallery(),t.children(".themeatelier-core-field-group").THEMEATELIER_CORE_field_group(),t.children(".themeatelier-core-field-icon").THEMEATELIER_CORE_field_icon(),t.children(".themeatelier-core-field-link").THEMEATELIER_CORE_field_link(),t.children(".themeatelier-core-field-media").THEMEATELIER_CORE_field_media(),t.children(".themeatelier-core-field-map").THEMEATELIER_CORE_field_map(),t.children(".themeatelier-core-field-repeater").THEMEATELIER_CORE_field_repeater(),t.children(".themeatelier-core-field-slider").THEMEATELIER_CORE_field_slider(),t.children(".themeatelier-core-field-sortable").THEMEATELIER_CORE_field_sortable(),t.children(".themeatelier-core-field-sorter").THEMEATELIER_CORE_field_sorter(),t.children(".themeatelier-core-field-spinner").THEMEATELIER_CORE_field_spinner(),t.children(".themeatelier-core-field-switcher").THEMEATELIER_CORE_field_switcher(),t.children(".themeatelier-core-field-section_tab").THEMEATELIER_CORE_field_section_tab(),t.children(".themeatelier-core-field-tabbed").THEMEATELIER_CORE_field_tabbed(),t.children(".themeatelier-core-field-typography").THEMEATELIER_CORE_field_typography(),t.children(".themeatelier-core-field-upload").THEMEATELIER_CORE_field_upload(),t.children(".themeatelier-core-field-wp_editor").THEMEATELIER_CORE_field_wp_editor(),t.children(".themeatelier-core-field-border").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-background").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-color").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-color_group").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-link_color").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-typography").find(".themeatelier-core-color").THEMEATELIER_CORE_color(),t.children(".themeatelier-core-field-select").find(".themeatelier-core-chosen").THEMEATELIER_CORE_chosen(),t.children(".themeatelier-core-field-checkbox").find(".themeatelier-core-checkbox").THEMEATELIER_CORE_checkbox(),t.children(".themeatelier-core-field-checkbox").find(".themeatelier-core-checkbox-all").THEMEATELIER_CORE_checkbox_all(),t.children(".themeatelier-core-field-button_set").find(".themeatelier-core-siblings").THEMEATELIER_CORE_siblings(),t.children(".themeatelier-core-field-image_select").find(".themeatelier-core-siblings").THEMEATELIER_CORE_siblings(),t.children(".themeatelier-core-field-layout_preset").find(".themeatelier-core-siblings").THEMEATELIER_CORE_siblings(),t.children(".themeatelier-core-field-palette").find(".themeatelier-core-siblings").THEMEATELIER_CORE_siblings(),t.children(".themeatelier-core-field").find(".themeatelier-core-help").THEMEATELIER_CORE_help(),a.dependency&&t.THEMEATELIER_CORE_dependency(),t.data("inited",!0),R(g).trigger("themeatelier-core-reload-script",t))})},R(g).ready(function(){R(".themeatelier-core-save").THEMEATELIER_CORE_save(),R(".themeatelier-core-options").THEMEATELIER_CORE_options(),R(".themeatelier-core-sticky-header").THEMEATELIER_CORE_sticky(),R(".themeatelier-core-nav-options").THEMEATELIER_CORE_nav_options(),R(".themeatelier-core-nav-metabox").THEMEATELIER_CORE_nav_metabox(),R(".themeatelier-core-taxonomy").THEMEATELIER_CORE_taxonomy(),R(".themeatelier-core-page-templates").THEMEATELIER_CORE_page_templates(),R(".themeatelier-core-post-formats").THEMEATELIER_CORE_post_formats(),R(".themeatelier-core-shortcode").THEMEATELIER_CORE_shortcode(),R(".themeatelier-core-search").THEMEATELIER_CORE_search(),R(".themeatelier-core-confirm").THEMEATELIER_CORE_confirm(),R(".themeatelier-core-expand-all").THEMEATELIER_CORE_expand_all(),R(".themeatelier-core-onload").THEMEATELIER_CORE_reload_script(),R("#widgets-editor").THEMEATELIER_CORE_widgets(),R("#widgets-right").THEMEATELIER_CORE_widgets(),R("#menu-to-edit").THEMEATELIER_CORE_nav_menu()}),R(".themeatelier-core-license input.btn-license-save-activate").on("click",function(){R(".themeatelier-core-license input.btn-license-activate").trigger("click")}),g.addEventListener("DOMContentLoaded",()=>{var t=g.querySelector(".pass_or_text_icon");let a=g.querySelector(".themeatelier-core-license-key"),e=a.querySelector(".themeatelier-core-license-key-input");t.addEventListener("click",()=>{"password"===e.type?(e.type="text",a.classList.remove("hide_pass"),a.classList.add("show_pass")):(e.type="password",a.classList.remove("show_pass"),a.classList.add("hide_pass"))})})})(jQuery,window,document);